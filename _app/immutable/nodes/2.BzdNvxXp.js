import{s as ye,n as Ge}from"../chunks/scheduler.CtbWrGNo.js";import{S as et,i as tt,e as d,s as I,t as C,c,a as h,d as r,f as b,b as S,y as at,o as u,z as V,p as P,g as Be,h as s,A as st,B as lt,j as Te,C as He}from"../chunks/index.BoMExaJv.js";function je(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const L="Team 1",N="Worthless Team",R="no idea",B="Team 4",J="牛奶咖喱營多印尼炒麵",K="Team 6",W="Team 7",q="Team 8",z="Team 9",G="武当派: 亚洲传奇",H="Team 11",Q="Team 12",U="Team 13",X="Team 14",Y="Team 15",Z="Team 16",mt={10056419:{team:L,T:0},10170668:{team:L,T:0},12585858:{team:L,T:1},3825470:{team:L,T:1},11113661:{team:L,T:2},7083079:{team:L,T:2},7407702:{team:L,T:3},22690359:{team:L,T:3},8802914:{team:N,T:0},2848604:{team:N,T:0},4137401:{team:N,T:1},12941954:{team:N,T:1},9043058:{team:N,T:2},17896085:{team:N,T:2},11444694:{team:N,T:3},13858681:{team:N,T:3},15816872:{team:R,T:0},9138046:{team:R,T:0},10516802:{team:R,T:1},15100415:{team:R,T:1},10500832:{team:R,T:2},9314367:{team:R,T:2},20971891:{team:R,T:3},17522180:{team:R,T:3},13207763:{team:B,T:0},14447878:{team:B,T:0},14726718:{team:B,T:1},8893772:{team:B,T:1},9082441:{team:B,T:2},15184992:{team:B,T:2},8947019:{team:B,T:3},13437541:{team:B,T:3},11307733:{team:J,T:0},17636394:{team:J,T:0},20988374:{team:J,T:1},9321674:{team:J,T:1},4335279:{team:J,T:2},14533605:{team:J,T:2},14129921:{team:J,T:3},3094900:{team:J,T:3},11443437:{team:K,T:0},2984074:{team:K,T:0},9317938:{team:K,T:1},17663666:{team:K,T:1},5179557:{team:K,T:2},1855908:{team:K,T:2},24232404:{team:K,T:3},7945343:{team:K,T:3},2165650:{team:W,T:0},12652779:{team:W,T:0},7457788:{team:W,T:1},16069829:{team:W,T:1},1026006:{team:W,T:2},3339073:{team:W,T:2},874891:{team:W,T:3},5936405:{team:W,T:3},11129034:{team:q,T:0},12566632:{team:q,T:0},6433183:{team:q,T:1},6338477:{team:q,T:1},6537257:{team:q,T:2},9586445:{team:q,T:2},15044350:{team:q,T:3},21573458:{team:q,T:3},5413624:{team:z,T:0},10592853:{team:z,T:0},16318993:{team:z,T:1},7852852:{team:z,T:1},14800198:{team:z,T:2},10458474:{team:z,T:2},3917377:{team:z,T:3},9164371:{team:z,T:3},8359561:{team:G,T:0},6916642:{team:G,T:0},757783:{team:G,T:1},1433427:{team:G,T:1},14942888:{team:G,T:2},18321104:{team:G,T:2},10436444:{team:G,T:3},13795588:{team:G,T:3},4659319:{team:H,T:0},12585048:{team:H,T:0},19577872:{team:H,T:1},2165622:{team:H,T:1},7825227:{team:H,T:2},3367476:{team:H,T:2},9218431:{team:H,T:3},16129812:{team:H,T:3},11375105:{team:Q,T:0},1355695:{team:Q,T:0},8194992:{team:Q,T:1},6763434:{team:Q,T:1},28290392:{team:Q,T:2},18212788:{team:Q,T:2},11611550:{team:Q,T:3},29220430:{team:Q,T:3},4896825:{team:U,T:0},5242158:{team:U,T:0},8688737:{team:U,T:1},9507565:{team:U,T:1},10625776:{team:U,T:2},16288992:{team:U,T:2},11396041:{team:U,T:3},8281276:{team:U,T:3},7813296:{team:X,T:0},10634348:{team:X,T:0},9547561:{team:X,T:1},6747917:{team:X,T:1},4075655:{team:X,T:2},25175502:{team:X,T:2},20660835:{team:X,T:3},11134301:{team:X,T:3},3898396:{team:Y,T:0},8926244:{team:Y,T:0},7172340:{team:Y,T:1},1766764:{team:Y,T:1},1775182:{team:Y,T:2},4113311:{team:Y,T:2},17163162:{team:Y,T:3},18901419:{team:Y,T:3},8799923:{team:Z,T:0},114017:{team:Z,T:0},12270069:{team:Z,T:1},15030466:{team:Z,T:1},24323283:{team:Z,T:2},11412507:{team:Z,T:2},8535398:{team:Z,T:3},3538079:{team:Z,T:3}};function Qe(t,m,l){const i=t.slice();return i[9]=m[l],i}function Ue(t,m,l){const i=t.slice();return i[9]=m[l],i}function Xe(t){let m,l=t[9]+"",i,w;return{c(){m=d("p"),i=C(l),w=I(),this.h()},l(n){m=c(n,"P",{class:!0});var T=h(m);i=S(T,l),w=b(T),T.forEach(r),this.h()},h(){u(m,"class","text-white first:text-5xl last:text-8xl [&:nth-child(2)]:text-6xl [&:nth-child(3)]:text-7xl")},m(n,T){Be(n,m,T),s(m,i),s(m,w)},p(n,T){T&1&&l!==(l=n[9]+"")&&Te(i,l)},d(n){n&&r(m)}}}function Ye(t){let m,l=t[9]+"",i,w;return{c(){m=d("p"),i=C(l),w=I(),this.h()},l(n){m=c(n,"P",{class:!0});var T=h(m);i=S(T,l),w=b(T),T.forEach(r),this.h()},h(){u(m,"class","text-white first:text-5xl last:text-8xl [&:nth-child(2)]:text-6xl [&:nth-child(3)]:text-7xl")},m(n,T){Be(n,m,T),s(m,i),s(m,w)},p(n,T){T&1&&l!==(l=n[9]+"")&&Te(i,l)},d(n){n&&r(m)}}}function nt(t){let m,l,i,w,n,T,x=(t[2][0]/4).toFixed(2)+"",j,ce,he,D,g=t[1][0]+"",p,oe,f,y="VS",ee,E,F=t[1][1]+"",_e,ke,O,Ae,ue=(t[2][1]/4).toFixed(2)+"",ge,Fe,Oe,te,$e,ae,k,se,we=`${t[1][0]/(t[1][0]+t[1][1])*100}%`,Me,A,ve=Math.abs(t[1][0]-t[1][1])+"",pe,Pe,le,Ee=`${t[1][1]/(t[1][0]+t[1][1])*100}%`,Le,$,me,Ie=`${t[1][0]/(t[1][0]+t[1][1])*100}%`,Ne,ne,be=`${t[1][1]/(t[1][0]+t[1][1])*100}%`,Re,Je,fe=je(t[0][0]),v=[];for(let e=0;e<fe.length;e+=1)v[e]=Xe(Ue(t,fe,e));let re=je(t[0][1]),_=[];for(let e=0;e<re.length;e+=1)_[e]=Ye(Qe(t,re,e));return{c(){m=d("div"),l=d("div"),i=d("div");for(let e=0;e<v.length;e+=1)v[e].c();w=I(),n=d("div"),T=C("(acc: "),j=C(x),ce=C(")"),he=I(),D=d("div"),p=C(g),oe=I(),f=d("p"),f.textContent=y,ee=I(),E=d("div"),_e=C(F),ke=I(),O=d("div"),Ae=C("(acc: "),ge=C(ue),Fe=C(")"),Oe=I(),te=d("div");for(let e=0;e<_.length;e+=1)_[e].c();$e=I(),ae=d("div"),k=d("div"),se=d("div"),Me=I(),A=d("div"),pe=C(ve),Pe=I(),le=d("div"),Le=I(),$=d("div"),me=d("div"),Ne=I(),ne=d("div"),this.h()},l(e){m=c(e,"DIV",{class:!0});var o=h(m);l=c(o,"DIV",{class:!0});var a=h(l);i=c(a,"DIV",{class:!0});var M=h(i);for(let ie=0;ie<v.length;ie+=1)v[ie].l(M);M.forEach(r),w=b(a),n=c(a,"DIV",{class:!0});var De=h(n);T=S(De,"(acc: "),j=S(De,x),ce=S(De,")"),De.forEach(r),he=b(a),D=c(a,"DIV",{class:!0});var Ke=h(D);p=S(Ke,g),Ke.forEach(r),oe=b(a),f=c(a,"P",{class:!0,"data-svelte-h":!0}),at(f)!=="svelte-ob87o3"&&(f.textContent=y),ee=b(a),E=c(a,"DIV",{class:!0});var We=h(E);_e=S(We,F),We.forEach(r),ke=b(a),O=c(a,"DIV",{class:!0});var Ve=h(O);Ae=S(Ve,"(acc: "),ge=S(Ve,ue),Fe=S(Ve,")"),Ve.forEach(r),Oe=b(a),te=c(a,"DIV",{class:!0});var qe=h(te);for(let ie=0;ie<_.length;ie+=1)_[ie].l(qe);qe.forEach(r),a.forEach(r),$e=b(o),ae=c(o,"DIV",{});var Ce=h(ae);k=c(Ce,"DIV",{class:!0});var de=h(k);se=c(de,"DIV",{class:!0}),h(se).forEach(r),Me=b(de),A=c(de,"DIV",{class:!0});var ze=h(A);pe=S(ze,ve),ze.forEach(r),Pe=b(de),le=c(de,"DIV",{class:!0}),h(le).forEach(r),de.forEach(r),Le=b(Ce),$=c(Ce,"DIV",{class:!0});var Se=h($);me=c(Se,"DIV",{class:!0}),h(me).forEach(r),Ne=b(Se),ne=c(Se,"DIV",{class:!0}),h(ne).forEach(r),Se.forEach(r),Ce.forEach(r),o.forEach(r),this.h()},h(){u(i,"class","flex flex-row items-center gap-5"),u(n,"class","text-3xl text-white"),u(D,"class","text-6xl text-white svelte-1kdf3em"),V(D,"winner",t[1][0]>t[1][1]),V(D,"loser",t[1][1]>t[1][0]),u(f,"class","text-4xl text-white"),u(E,"class","text-6xl text-white svelte-1kdf3em"),V(E,"winner",t[1][1]>t[1][0]),V(E,"loser",t[1][0]>t[1][1]),u(O,"class","text-3xl text-white"),u(te,"class","flex flex-row-reverse items-center gap-5"),u(l,"class","flex items-center justify-between p-5"),u(se,"class","flex h-16 justify-end duration-150"),P(se,"width",we),u(A,"class","mb-2 rounded-lg bg-slate-200 p-3 text-5xl duration-150 svelte-1kdf3em"),V(A,"diff-blue-win",t[1][1]-t[1][0]>0),V(A,"diff-red-win",t[1][0]-t[1][1]>0),u(le,"class","h-16 duration-150"),P(le,"width",Ee),u(k,"class","flex justify-center"),u(me,"class","flex h-16 justify-end bg-red-500 duration-150"),P(me,"width",Ie),u(ne,"class","h-16 bg-blue-500 duration-150"),P(ne,"width",be),u($,"class","flex justify-center"),u(m,"class","flex h-screen w-screen flex-col justify-between")},m(e,o){Be(e,m,o),s(m,l),s(l,i);for(let a=0;a<v.length;a+=1)v[a]&&v[a].m(i,null);s(l,w),s(l,n),s(n,T),s(n,j),s(n,ce),s(l,he),s(l,D),s(D,p),s(l,oe),s(l,f),s(l,ee),s(l,E),s(E,_e),s(l,ke),s(l,O),s(O,Ae),s(O,ge),s(O,Fe),s(l,Oe),s(l,te);for(let a=0;a<_.length;a+=1)_[a]&&_[a].m(te,null);s(m,$e),s(m,ae),s(ae,k),s(k,se),s(k,Me),s(k,A),s(A,pe),s(k,Pe),s(k,le),s(ae,Le),s(ae,$),s($,me),s($,Ne),s($,ne),Re||(Je=st(window,"keydown",lt(t[3])),Re=!0)},p(e,[o]){if(o&1){fe=je(e[0][0]);let a;for(a=0;a<fe.length;a+=1){const M=Ue(e,fe,a);v[a]?v[a].p(M,o):(v[a]=Xe(M),v[a].c(),v[a].m(i,null))}for(;a<v.length;a+=1)v[a].d(1);v.length=fe.length}if(o&4&&x!==(x=(e[2][0]/4).toFixed(2)+"")&&Te(j,x),o&2&&g!==(g=e[1][0]+"")&&Te(p,g),o&2&&V(D,"winner",e[1][0]>e[1][1]),o&2&&V(D,"loser",e[1][1]>e[1][0]),o&2&&F!==(F=e[1][1]+"")&&Te(_e,F),o&2&&V(E,"winner",e[1][1]>e[1][0]),o&2&&V(E,"loser",e[1][0]>e[1][1]),o&4&&ue!==(ue=(e[2][1]/4).toFixed(2)+"")&&Te(ge,ue),o&1){re=je(e[0][1]);let a;for(a=0;a<re.length;a+=1){const M=Qe(e,re,a);_[a]?_[a].p(M,o):(_[a]=Ye(M),_[a].c(),_[a].m(te,null))}for(;a<_.length;a+=1)_[a].d(1);_.length=re.length}o&2&&we!==(we=`${e[1][0]/(e[1][0]+e[1][1])*100}%`)&&P(se,"width",we),o&2&&ve!==(ve=Math.abs(e[1][0]-e[1][1])+"")&&Te(pe,ve),o&2&&V(A,"diff-blue-win",e[1][1]-e[1][0]>0),o&2&&V(A,"diff-red-win",e[1][0]-e[1][1]>0),o&2&&Ee!==(Ee=`${e[1][1]/(e[1][0]+e[1][1])*100}%`)&&P(le,"width",Ee),o&2&&Ie!==(Ie=`${e[1][0]/(e[1][0]+e[1][1])*100}%`)&&P(me,"width",Ie),o&2&&be!==(be=`${e[1][1]/(e[1][0]+e[1][1])*100}%`)&&P(ne,"width",be)},i:Ge,o:Ge,d(e){e&&r(m),He(v,e),He(_,e),Re=!1,Je()}}}function Ze(t,m){return m.score-t.score}function xe(t,m){return m.acc-t.acc}function it(t,m,l){let i=[[0,0,0,0],[0,0,0,0]],w=[0,0],n=[0,0];const T=[10,7,5,3,1],x=new WebSocket("ws://127.0.0.1:24050/ws");let j=!1;function ce(g){switch(g.key){case"t":j=!j;break}}function he(g,p){return T[p]>T[g]?T[g]+(T[p]-T[g])*.5:T[p]}function D(g,p){return!j&&p!==void 0&&!g.bonus_score_flag&&g.score>2*p.score?(p.bonus_score_flag=!0,!0):!1}return x.addEventListener("message",g=>{let p=JSON.parse(g.data).tourney.ipcClients;if(p.find(f=>f.spectating.userID===0)!==void 0)return;let oe=p.map((f,y)=>({team:y<4?0:1,id:f.spectating.userID,score:f.gameplay.score,tier:mt[f.spectating.userID].T,acc:f.gameplay.accuracy,bonus_score_flag:!1})).sort(j?xe:Ze);l(2,n=[0,0]),oe.forEach(f=>{const y=oe.filter(F=>F.team!=f.team),ee=y.findIndex(F=>(j?xe:Ze)(f,F)<0),E=he(f.tier,ee===-1?4:ee)+(D(f,y[ee+1])?.5:0);l(0,i[f.team][f.tier]=E,i),l(2,n[f.team]+=f.acc,n),l(1,w[f.team]+=E,w)})}),[i,w,n,ce]}class ft extends et{constructor(m){super(),tt(this,m,it,nt,ye,{})}}export{ft as component};
