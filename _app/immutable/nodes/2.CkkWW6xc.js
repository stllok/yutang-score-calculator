import{s as Se,n as pe}from"../chunks/scheduler.CtbWrGNo.js";import{S as Fe,i as Pe,e as w,s as y,t as v,c as E,a as V,d,f as $,b as x,y as Le,o as D,g as le,h as i,j as ee,z as _e}from"../chunks/index.BiWrq4kN.js";function ne(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}const S="Team 1",F="Worthless Team",P="no idea",L="Team 4",O="牛奶咖喱營多印尼炒麵",j="Team 6",A="Team 7",J="Team 8",K="Team 9",M="武当派: 亚洲传奇",N="Team 11",W="Team 12",q="Team 13",z="Team 14",B="Team 15",G="Team 16",Oe={10056419:{team:S,T:0},10170668:{team:S,T:0},12585858:{team:S,T:1},3825470:{team:S,T:1},11113661:{team:S,T:2},7083079:{team:S,T:2},7407702:{team:S,T:3},22690359:{team:S,T:3},8802914:{team:F,T:0},2848604:{team:F,T:0},4137401:{team:F,T:1},12941954:{team:F,T:1},9043058:{team:F,T:2},17896085:{team:F,T:2},11444694:{team:F,T:3},13858681:{team:F,T:3},15816872:{team:P,T:0},9138046:{team:P,T:0},10516802:{team:P,T:1},15100415:{team:P,T:1},10500832:{team:P,T:2},9314367:{team:P,T:2},20971891:{team:P,T:3},17522180:{team:P,T:3},13207763:{team:L,T:0},14447878:{team:L,T:0},14726718:{team:L,T:1},8893772:{team:L,T:1},9082441:{team:L,T:2},15184992:{team:L,T:2},8947019:{team:L,T:3},13437541:{team:L,T:3},11307733:{team:O,T:0},17636394:{team:O,T:0},20988374:{team:O,T:1},9321674:{team:O,T:1},4335279:{team:O,T:2},14533605:{team:O,T:2},14129921:{team:O,T:3},3094900:{team:O,T:3},11443437:{team:j,T:0},2984074:{team:j,T:0},9317938:{team:j,T:1},17663666:{team:j,T:1},5179557:{team:j,T:2},1855908:{team:j,T:2},24232404:{team:j,T:3},7945343:{team:j,T:3},2165650:{team:A,T:0},12652779:{team:A,T:0},7457788:{team:A,T:1},16069829:{team:A,T:1},1026006:{team:A,T:2},3339073:{team:A,T:2},874891:{team:A,T:3},5936405:{team:A,T:3},11129034:{team:J,T:0},12566632:{team:J,T:0},6433183:{team:J,T:1},6338477:{team:J,T:1},6537257:{team:J,T:2},9586445:{team:J,T:2},15044350:{team:J,T:3},21573458:{team:J,T:3},5413624:{team:K,T:0},10592853:{team:K,T:0},16318993:{team:K,T:1},7852852:{team:K,T:1},14800198:{team:K,T:2},10458474:{team:K,T:2},3917377:{team:K,T:3},9164371:{team:K,T:3},8359561:{team:M,T:0},6916642:{team:M,T:0},757783:{team:M,T:1},1433427:{team:M,T:1},14942888:{team:M,T:2},18321104:{team:M,T:2},10436444:{team:M,T:3},13795588:{team:M,T:3},4659319:{team:N,T:0},12585048:{team:N,T:0},19577872:{team:N,T:1},2165622:{team:N,T:1},7825227:{team:N,T:2},3367476:{team:N,T:2},9218431:{team:N,T:3},16129812:{team:N,T:3},11375105:{team:W,T:0},1355695:{team:W,T:0},8194992:{team:W,T:1},6763434:{team:W,T:1},28290392:{team:W,T:2},18212788:{team:W,T:2},11611550:{team:W,T:3},29220430:{team:W,T:3},4896825:{team:q,T:0},5242158:{team:q,T:0},8688737:{team:q,T:1},9507565:{team:q,T:1},10625776:{team:q,T:2},16288992:{team:q,T:2},11396041:{team:q,T:3},8281276:{team:q,T:3},7813296:{team:z,T:0},10634348:{team:z,T:0},9547561:{team:z,T:1},6747917:{team:z,T:1},4075655:{team:z,T:2},25175502:{team:z,T:2},20660835:{team:z,T:3},11134301:{team:z,T:3},3898396:{team:B,T:0},8926244:{team:B,T:0},7172340:{team:B,T:1},1766764:{team:B,T:1},1775182:{team:B,T:2},4113311:{team:B,T:2},17163162:{team:B,T:3},18901419:{team:B,T:3},8799923:{team:G,T:0},114017:{team:G,T:0},12270069:{team:G,T:1},15030466:{team:G,T:1},24323283:{team:G,T:2},11412507:{team:G,T:2},8535398:{team:G,T:3},3538079:{team:G,T:3}};function ve(a,e,l){const n=a.slice();return n[7]=e[l],n}function xe(a,e,l){const n=a.slice();return n[7]=e[l],n}function ge(a){let e,l=a[7]+"",n,o;return{c(){e=w("p"),n=v(l),o=v(`
			,`),this.h()},l(s){e=E(s,"P",{class:!0});var T=V(e);n=x(T,l),T.forEach(d),o=x(s,`
			,`),this.h()},h(){D(e,"class","text-4xl text-white")},m(s,T){le(s,e,T),i(e,n),le(s,o,T)},p(s,T){T&4&&l!==(l=s[7]+"")&&ee(n,l)},d(s){s&&(d(e),d(o))}}}function Ie(a){let e,l=a[7]+"",n,o;return{c(){e=w("p"),n=v(l),o=v(`
			,`),this.h()},l(s){e=E(s,"P",{class:!0});var T=V(e);n=x(T,l),T.forEach(d),o=x(s,`
			,`),this.h()},h(){D(e,"class","text-4xl text-white")},m(s,T){le(s,e,T),i(e,n),le(s,o,T)},p(s,T){T&8&&l!==(l=s[7]+"")&&ee(n,l)},d(s){s&&(d(e),d(o))}}}function je(a){let e,l,n,o,s,T=(a[0].map(we).reduce(Ee,0)/4).toFixed(2)+"",g,te,Q,_,u=a[2].reduce(De,0)+"",r,b,p,U="VS",H,X,ae=a[3].reduce(be,0)+"",se,oe,C,re,me=(a[1].map(Ve).reduce(Ce,0)/4).toFixed(2)+"",Te,ie,fe,R,Y=ne(a[2]),f=[];for(let m=0;m<Y.length;m+=1)f[m]=ge(xe(a,Y,m));let Z=ne(a[3]),h=[];for(let m=0;m<Z.length;m+=1)h[m]=Ie(ve(a,Z,m));return{c(){e=w("div"),l=w("div");for(let m=0;m<f.length;m+=1)f[m].c();n=y(),o=w("div"),s=v("(acc: "),g=v(T),te=v(")"),Q=y(),_=w("div"),r=v(u),b=y(),p=w("p"),p.textContent=U,H=y(),X=w("div"),se=v(ae),oe=y(),C=w("div"),re=v("(acc: "),Te=v(me),ie=v(")"),fe=y(),R=w("div");for(let m=0;m<h.length;m+=1)h[m].c();this.h()},l(m){e=E(m,"DIV",{class:!0});var c=V(e);l=E(c,"DIV",{class:!0});var t=V(l);for(let k=0;k<f.length;k+=1)f[k].l(t);t.forEach(d),n=$(c),o=E(c,"DIV",{class:!0});var I=V(o);s=x(I,"(acc: "),g=x(I,T),te=x(I,")"),I.forEach(d),Q=$(c),_=E(c,"DIV",{class:!0});var he=V(_);r=x(he,u),he.forEach(d),b=$(c),p=E(c,"P",{class:!0,"data-svelte-h":!0}),Le(p)!=="svelte-ob87o3"&&(p.textContent=U),H=$(c),X=E(c,"DIV",{class:!0});var ue=V(X);se=x(ue,ae),ue.forEach(d),oe=$(c),C=E(c,"DIV",{class:!0});var ce=V(C);re=x(ce,"(acc: "),Te=x(ce,me),ie=x(ce,")"),ce.forEach(d),fe=$(c),R=E(c,"DIV",{class:!0});var de=V(R);for(let k=0;k<h.length;k+=1)h[k].l(de);de.forEach(d),c.forEach(d),this.h()},h(){D(l,"class","flex flex-row gap-5"),D(o,"class","text-3xl text-white"),D(_,"class","text-8xl text-white"),D(p,"class","text-4xl text-white"),D(X,"class","text-8xl text-white"),D(C,"class","text-3xl text-white"),D(R,"class","flex flex-row gap-2"),D(e,"class","flex h-screen items-center justify-between p-5")},m(m,c){le(m,e,c),i(e,l);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(l,null);i(e,n),i(e,o),i(o,s),i(o,g),i(o,te),i(e,Q),i(e,_),i(_,r),i(e,b),i(e,p),i(e,H),i(e,X),i(X,se),i(e,oe),i(e,C),i(C,re),i(C,Te),i(C,ie),i(e,fe),i(e,R);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(R,null)},p(m,[c]){if(c&4){Y=ne(m[2]);let t;for(t=0;t<Y.length;t+=1){const I=xe(m,Y,t);f[t]?f[t].p(I,c):(f[t]=ge(I),f[t].c(),f[t].m(l,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=Y.length}if(c&1&&T!==(T=(m[0].map(we).reduce(Ee,0)/4).toFixed(2)+"")&&ee(g,T),c&4&&u!==(u=m[2].reduce(De,0)+"")&&ee(r,u),c&8&&ae!==(ae=m[3].reduce(be,0)+"")&&ee(se,ae),c&2&&me!==(me=(m[1].map(Ve).reduce(Ce,0)/4).toFixed(2)+"")&&ee(Te,me),c&8){Z=ne(m[3]);let t;for(t=0;t<Z.length;t+=1){const I=ve(m,Z,t);h[t]?h[t].p(I,c):(h[t]=Ie(I),h[t].c(),h[t].m(R,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=Z.length}},i:pe,o:pe,d(m){m&&d(e),_e(f,m),_e(h,m)}}}const we=a=>a.acc,Ee=(a,e)=>a+e,De=(a,e)=>a+e,be=(a,e)=>a+e,Ve=a=>a.acc,Ce=(a,e)=>a+e;function Ae(a,e,l){let n=[],o=[],s=[0,0,0,0],T=[0,0,0,0];const g=[10,7,5,3,1],te=new WebSocket("ws://127.0.0.1:24050/ws");function Q(_,u){return g[u]>g[_]?g[_]+(g[u]-g[_])*.5:g[u]}return te.addEventListener("message",_=>{let u=JSON.parse(_.data).tourney.ipcClients;u.find(r=>r.spectating.userID===0)===void 0&&(u=u.map(r=>({id:r.spectating.userID,score:r.gameplay.score,tier:Oe[r.spectating.userID].T,acc:r.gameplay.accuracy})),l(0,n=u.slice(0,4).sort((r,b)=>b.score-r.score)),l(1,o=u.slice(4).sort((r,b)=>b.score-r.score)),n.forEach((r,b)=>{let p=o.findIndex(H=>r.score>=H.score),U=Q(r.tier,p===-1?4:p);l(2,s[r.tier]=U,s)}),o.forEach((r,b)=>{let p=n.findIndex(H=>r.score>=H.score),U=Q(r.tier,p===-1?4:p);l(3,T[r.tier]=U,T)}))}),[n,o,s,T]}class Me extends Fe{constructor(e){super(),Pe(this,e,Ae,je,Se,{})}}export{Me as component};
