import{s as Ue,n as Be}from"../chunks/scheduler.CtbWrGNo.js";import{S as Xe,i as Ye,e as h,s as E,t as j,c as d,a as u,d as f,f as D,b as C,y as Ze,o as v,z as V,p as J,g as Je,h as s,j as ne,A as Ge}from"../chunks/index.Dlwe8uin.js";function Ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const K="Team 1",N="Worthless Team",W="no idea",q="Team 4",B="牛奶咖喱營多印尼炒麵",G="Team 6",H="Team 7",R="Team 8",k="Team 9",Q="武当派: 亚洲传奇",U="Team 11",X="Team 12",Y="Team 13",Z="Team 14",y="Team 15",$="Team 16",ye={10056419:{team:K,T:0},10170668:{team:K,T:0},12585858:{team:K,T:1},3825470:{team:K,T:1},11113661:{team:K,T:2},7083079:{team:K,T:2},7407702:{team:K,T:3},22690359:{team:K,T:3},8802914:{team:N,T:0},2848604:{team:N,T:0},4137401:{team:N,T:1},12941954:{team:N,T:1},9043058:{team:N,T:2},17896085:{team:N,T:2},11444694:{team:N,T:3},13858681:{team:N,T:3},15816872:{team:W,T:0},9138046:{team:W,T:0},10516802:{team:W,T:1},15100415:{team:W,T:1},10500832:{team:W,T:2},9314367:{team:W,T:2},20971891:{team:W,T:3},17522180:{team:W,T:3},13207763:{team:q,T:0},14447878:{team:q,T:0},14726718:{team:q,T:1},8893772:{team:q,T:1},9082441:{team:q,T:2},15184992:{team:q,T:2},8947019:{team:q,T:3},13437541:{team:q,T:3},11307733:{team:B,T:0},17636394:{team:B,T:0},20988374:{team:B,T:1},9321674:{team:B,T:1},4335279:{team:B,T:2},14533605:{team:B,T:2},14129921:{team:B,T:3},3094900:{team:B,T:3},11443437:{team:G,T:0},2984074:{team:G,T:0},9317938:{team:G,T:1},17663666:{team:G,T:1},5179557:{team:G,T:2},1855908:{team:G,T:2},24232404:{team:G,T:3},7945343:{team:G,T:3},2165650:{team:H,T:0},12652779:{team:H,T:0},7457788:{team:H,T:1},16069829:{team:H,T:1},1026006:{team:H,T:2},3339073:{team:H,T:2},874891:{team:H,T:3},5936405:{team:H,T:3},11129034:{team:R,T:0},12566632:{team:R,T:0},6433183:{team:R,T:1},6338477:{team:R,T:1},6537257:{team:R,T:2},9586445:{team:R,T:2},15044350:{team:R,T:3},21573458:{team:R,T:3},5413624:{team:k,T:0},10592853:{team:k,T:0},16318993:{team:k,T:1},7852852:{team:k,T:1},14800198:{team:k,T:2},10458474:{team:k,T:2},3917377:{team:k,T:3},9164371:{team:k,T:3},8359561:{team:Q,T:0},6916642:{team:Q,T:0},757783:{team:Q,T:1},1433427:{team:Q,T:1},14942888:{team:Q,T:2},18321104:{team:Q,T:2},10436444:{team:Q,T:3},13795588:{team:Q,T:3},4659319:{team:U,T:0},12585048:{team:U,T:0},19577872:{team:U,T:1},2165622:{team:U,T:1},7825227:{team:U,T:2},3367476:{team:U,T:2},9218431:{team:U,T:3},16129812:{team:U,T:3},11375105:{team:X,T:0},1355695:{team:X,T:0},8194992:{team:X,T:1},6763434:{team:X,T:1},28290392:{team:X,T:2},18212788:{team:X,T:2},11611550:{team:X,T:3},29220430:{team:X,T:3},4896825:{team:Y,T:0},5242158:{team:Y,T:0},8688737:{team:Y,T:1},9507565:{team:Y,T:1},10625776:{team:Y,T:2},16288992:{team:Y,T:2},11396041:{team:Y,T:3},8281276:{team:Y,T:3},7813296:{team:Z,T:0},10634348:{team:Z,T:0},9547561:{team:Z,T:1},6747917:{team:Z,T:1},4075655:{team:Z,T:2},25175502:{team:Z,T:2},20660835:{team:Z,T:3},11134301:{team:Z,T:3},3898396:{team:y,T:0},8926244:{team:y,T:0},7172340:{team:y,T:1},1766764:{team:y,T:1},1775182:{team:y,T:2},4113311:{team:y,T:2},17163162:{team:y,T:3},18901419:{team:y,T:3},8799923:{team:$,T:0},114017:{team:$,T:0},12270069:{team:$,T:1},15030466:{team:$,T:1},24323283:{team:$,T:2},11412507:{team:$,T:2},8535398:{team:$,T:3},3538079:{team:$,T:3}};function He(t,m,l){const T=t.slice();return T[11]=m[l],T}function Re(t,m,l){const T=t.slice();return T[11]=m[l],T}function ke(t){let m,l=t[11]+"",T,w;return{c(){m=h("p"),T=j(l),w=E(),this.h()},l(i){m=d(i,"P",{class:!0});var o=u(m);T=C(o,l),w=D(o),o.forEach(f),this.h()},h(){v(m,"class","text-white first:text-5xl last:text-8xl [&:nth-child(2)]:text-6xl [&:nth-child(3)]:text-7xl")},m(i,o){Je(i,m,o),s(m,T),s(m,w)},p(i,o){o&1&&l!==(l=i[11]+"")&&ne(T,l)},d(i){i&&f(m)}}}function Qe(t){let m,l=t[11]+"",T,w;return{c(){m=h("p"),T=j(l),w=E(),this.h()},l(i){m=d(i,"P",{class:!0});var o=u(m);T=C(o,l),w=D(o),o.forEach(f),this.h()},h(){v(m,"class","text-white first:text-5xl last:text-8xl [&:nth-child(2)]:text-6xl [&:nth-child(3)]:text-7xl")},m(i,o){Je(i,m,o),s(m,T),s(m,w)},p(i,o){o&2&&l!==(l=i[11]+"")&&ne(T,l)},d(i){i&&f(m)}}}function $e(t){let m,l,T,w,i,o,P=(t[2]/4).toFixed(2)+"",z,Te,re,_,oe,ce,I,b="VS",n,c,M,x,A,Se,ue=(t[3]/4).toFixed(2)+"",_e,Fe,Pe,ee,ze,te,S,ae,ge=`${t[4]/(t[4]+t[5])*100}%`,Me,F,ve=Math.abs(t[4]-t[5])+"",pe,Ae,le,we=`${t[5]/(t[4]+t[5])*100}%`,Le,L,se,Ie=`${t[4]/(t[4]+t[5])*100}%`,Oe,me,Ee=`${t[5]/(t[4]+t[5])*100}%`,fe=Ce(t[0]),g=[];for(let e=0;e<fe.length;e+=1)g[e]=ke(Re(t,fe,e));let he=Ce(t[1]),p=[];for(let e=0;e<he.length;e+=1)p[e]=Qe(He(t,he,e));return{c(){m=h("div"),l=h("div"),T=h("div");for(let e=0;e<g.length;e+=1)g[e].c();w=E(),i=h("div"),o=j("(acc: "),z=j(P),Te=j(")"),re=E(),_=h("div"),oe=j(t[4]),ce=E(),I=h("p"),I.textContent=b,n=E(),c=h("div"),M=j(t[5]),x=E(),A=h("div"),Se=j("(acc: "),_e=j(ue),Fe=j(")"),Pe=E(),ee=h("div");for(let e=0;e<p.length;e+=1)p[e].c();ze=E(),te=h("div"),S=h("div"),ae=h("div"),Me=E(),F=h("div"),pe=j(ve),Ae=E(),le=h("div"),Le=E(),L=h("div"),se=h("div"),Oe=E(),me=h("div"),this.h()},l(e){m=d(e,"DIV",{class:!0});var r=u(m);l=d(r,"DIV",{class:!0});var a=u(l);T=d(a,"DIV",{class:!0});var O=u(T);for(let ie=0;ie<g.length;ie+=1)g[ie].l(O);O.forEach(f),w=D(a),i=d(a,"DIV",{class:!0});var De=u(i);o=C(De,"(acc: "),z=C(De,P),Te=C(De,")"),De.forEach(f),re=D(a),_=d(a,"DIV",{class:!0});var Ke=u(_);oe=C(Ke,t[4]),Ke.forEach(f),ce=D(a),I=d(a,"P",{class:!0,"data-svelte-h":!0}),Ze(I)!=="svelte-ob87o3"&&(I.textContent=b),n=D(a),c=d(a,"DIV",{class:!0});var Ne=u(c);M=C(Ne,t[5]),Ne.forEach(f),x=D(a),A=d(a,"DIV",{class:!0});var be=u(A);Se=C(be,"(acc: "),_e=C(be,ue),Fe=C(be,")"),be.forEach(f),Pe=D(a),ee=d(a,"DIV",{class:!0});var We=u(ee);for(let ie=0;ie<p.length;ie+=1)p[ie].l(We);We.forEach(f),a.forEach(f),ze=D(r),te=d(r,"DIV",{});var Ve=u(te);S=d(Ve,"DIV",{class:!0});var de=u(S);ae=d(de,"DIV",{class:!0}),u(ae).forEach(f),Me=D(de),F=d(de,"DIV",{class:!0});var qe=u(F);pe=C(qe,ve),qe.forEach(f),Ae=D(de),le=d(de,"DIV",{class:!0}),u(le).forEach(f),de.forEach(f),Le=D(Ve),L=d(Ve,"DIV",{class:!0});var je=u(L);se=d(je,"DIV",{class:!0}),u(se).forEach(f),Oe=D(je),me=d(je,"DIV",{class:!0}),u(me).forEach(f),je.forEach(f),Ve.forEach(f),r.forEach(f),this.h()},h(){v(T,"class","flex flex-row items-center gap-5"),v(i,"class","text-3xl text-white"),v(_,"class","text-6xl text-white svelte-1gzglpp"),V(_,"winner",t[4]>t[5]),V(_,"loser",t[5]>t[4]),v(I,"class","text-4xl text-white"),v(c,"class","text-6xl text-white svelte-1gzglpp"),V(c,"winner",t[5]>t[4]),V(c,"loser",t[4]>t[5]),v(A,"class","text-3xl text-white"),v(ee,"class","flex flex-row-reverse items-center gap-5"),v(l,"class","flex items-center justify-between p-5"),v(ae,"class","flex h-16 justify-end duration-150"),J(ae,"width",ge),v(F,"class","mb-2 rounded-lg bg-slate-200 p-3 text-5xl duration-150 svelte-1gzglpp"),V(F,"diff-blue-win",t[5]-t[4]>0),V(F,"diff-red-win",t[4]-t[5]>0),v(le,"class","h-16 duration-150"),J(le,"width",we),v(S,"class","flex justify-center"),v(se,"class","flex h-16 justify-end bg-red-500 duration-150"),J(se,"width",Ie),v(me,"class","h-16 bg-blue-500 duration-150"),J(me,"width",Ee),v(L,"class","flex justify-center"),v(m,"class","flex h-screen w-screen flex-col justify-between")},m(e,r){Je(e,m,r),s(m,l),s(l,T);for(let a=0;a<g.length;a+=1)g[a]&&g[a].m(T,null);s(l,w),s(l,i),s(i,o),s(i,z),s(i,Te),s(l,re),s(l,_),s(_,oe),s(l,ce),s(l,I),s(l,n),s(l,c),s(c,M),s(l,x),s(l,A),s(A,Se),s(A,_e),s(A,Fe),s(l,Pe),s(l,ee);for(let a=0;a<p.length;a+=1)p[a]&&p[a].m(ee,null);s(m,ze),s(m,te),s(te,S),s(S,ae),s(S,Me),s(S,F),s(F,pe),s(S,Ae),s(S,le),s(te,Le),s(te,L),s(L,se),s(L,Oe),s(L,me)},p(e,[r]){if(r&1){fe=Ce(e[0]);let a;for(a=0;a<fe.length;a+=1){const O=Re(e,fe,a);g[a]?g[a].p(O,r):(g[a]=ke(O),g[a].c(),g[a].m(T,null))}for(;a<g.length;a+=1)g[a].d(1);g.length=fe.length}if(r&4&&P!==(P=(e[2]/4).toFixed(2)+"")&&ne(z,P),r&16&&ne(oe,e[4]),r&48&&V(_,"winner",e[4]>e[5]),r&48&&V(_,"loser",e[5]>e[4]),r&32&&ne(M,e[5]),r&48&&V(c,"winner",e[5]>e[4]),r&48&&V(c,"loser",e[4]>e[5]),r&8&&ue!==(ue=(e[3]/4).toFixed(2)+"")&&ne(_e,ue),r&2){he=Ce(e[1]);let a;for(a=0;a<he.length;a+=1){const O=He(e,he,a);p[a]?p[a].p(O,r):(p[a]=Qe(O),p[a].c(),p[a].m(ee,null))}for(;a<p.length;a+=1)p[a].d(1);p.length=he.length}r&48&&ge!==(ge=`${e[4]/(e[4]+e[5])*100}%`)&&J(ae,"width",ge),r&48&&ve!==(ve=Math.abs(e[4]-e[5])+"")&&ne(pe,ve),r&48&&V(F,"diff-blue-win",e[5]-e[4]>0),r&48&&V(F,"diff-red-win",e[4]-e[5]>0),r&48&&we!==(we=`${e[5]/(e[4]+e[5])*100}%`)&&J(le,"width",we),r&48&&Ie!==(Ie=`${e[4]/(e[4]+e[5])*100}%`)&&J(se,"width",Ie),r&48&&Ee!==(Ee=`${e[5]/(e[4]+e[5])*100}%`)&&J(me,"width",Ee)},i:Be,o:Be,d(e){e&&f(m),Ge(g,e),Ge(p,e)}}}function xe(t,m,l){let T=[],w=[],i=[0,0,0,0],o=[0,0,0,0],P=0,z=0,Te=30.5,re=32.5;const _=[10,7,5,3,1],oe=new WebSocket("ws://127.0.0.1:24050/ws");function ce(I,b){return _[b]>_[I]?_[I]+(_[b]-_[I])*.5:_[b]}return oe.addEventListener("message",I=>{let b=JSON.parse(I.data).tourney.ipcClients;b.find(n=>n.spectating.userID===0)===void 0&&(b=b.map(n=>({id:n.spectating.userID,score:n.gameplay.score,tier:ye[n.spectating.userID].T,acc:n.gameplay.accuracy})),T=b.slice(0,4).sort((n,c)=>c.score-n.score),w=b.slice(4).sort((n,c)=>c.score-n.score),l(2,P=l(3,z=0)),T.forEach(n=>{const c=w.findIndex(x=>n.score>=x.score),M=ce(n.tier,c===-1?4:c);l(0,i[n.tier]=M,i),l(2,P+=n.acc)}),w.forEach(n=>{const c=T.findIndex(x=>n.score>=x.score),M=ce(n.tier,c===-1?4:c);l(1,o[n.tier]=M,o),l(3,z+=n.acc)}),l(4,Te=i.reduce((n,c)=>n+c,0)),l(5,re=o.reduce((n,c)=>n+c,0)))}),[i,o,P,z,Te,re]}class at extends Xe{constructor(m){super(),Ye(this,m,xe,$e,Ue,{})}}export{at as component};
